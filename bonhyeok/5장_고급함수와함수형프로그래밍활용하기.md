## 코틀린을 활용한 함수형 프로그래밍
***

### 고차 함수
**ChatGPT**  
코틀린에서 코차함수는 함수 자체를 인수로 받거나, 함수를 반환하는 함수이다. 고차함수를 사용하는 주요 이유는
코드의 재사용성을 높이고, 간경하고 명확한 코드를 작성할 수 있기 때문이다.

```kotlin
fun main(){
    println( sum(intArrayOf(1, 2, 3))  ) // 6
    println( max(intArrayOf(1, 2, 3))  ) // 3
}

fun aggregate(numbers: IntArray, op: (Int, Int) -> Int): Int {
    var result = numbers.firstOrNull()?: throw IllegalArgumentException("Empty array")

    for( i in 1..numbers.lastIndex ){
        result = op(result, numbers[i])
    }
    return result;
}

fun sum(numbers: IntArray) = aggregate(numbers, {result, op -> result + op})

fun max(numbers: IntArray) = aggregate(numbers, {result, op -> if(op > result) op else result})
```
***

### 함수 타입

함수 타입은 함수처럼 쓰일 수 있는 값들을 표시하는 타입이다. 문법적으로 이런 타입은 함수 시그니처와 비슷하며,
아래와 같이 두 가지 부분으로 구성된다.
1. 괄호로 둘러싸인 파라미터 타입 목록은 함숫값에 전달될 데이터의 종류와 수를 정의한다.
2. 반환 타입은 함수 타입의 함숫값을 호출하면 돌려받게 되는 값의 타입을 정의한다.

반환값이 없는 함수라도 함수 타입에서는 반환 타입을 반드시 명시해야 한다. 따라서 이런 경우 Unit을 반환
타입으로 사용한다.

```kotlin
fun interface StringConsumer{
    fun accept(s:String)
}

fun main(){
    val consume = StringConsumer{ s-> println(s) }

    consume.accept("Hello")
}
```

함수 타입의 값을 함수의 파라미터에만 사용할 수 있는 것도 아니다. 실제로는 이런 함수 타입을 다른 타입이 쓰일
수 있는 모든 장소에 사용할 수 있다.
```kotlin
fun main(){
    val lessThan: (Int, Int) -> Boolean = {a, b -> a < b}
    println(lessThan(1, 2))
}
```
변수 타입을 생략하면 정보가 충분하지 못해 컴파일러가 람다 파라미터의 타입을 추론할 수 없다
```kotlin
val lessThan = { a, b -> a < b } // error: connot infer a type this parameter
val lessThan1 = { a: Int, b: Int -> a < b} // OK
```
다른 타입과 마찬가지로 함수 타입도 널이 될 수 이쓴ㄴ 타입으로 지정할 수 있다.
이럴 때는 함수 타입 전체에 괄호로 둘러싼 다음에 물을표를 붙인다.
```kotlin
fun measureTime(action: (() -> Unit)?): Long{
    val start = System.nanoTime();
    
    action?.invoke()
    
    return System.nanoTime() - start
}

fun main(){
    println(measureTime(null))
}
// invoke눈 action이 null이 아닐 경우에만 invoke()를 호출하여 action 함수를 실행한다.
```